<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NID Generator - Pro</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600;700&display=swap');
        body { font-family: 'Hind Siliguri', sans-serif; display: flex; flex-direction: column; min-height: 100vh; }
        .nid-card-font { font-family: 'Hind Siliguri', sans-serif; }
        .modal-bg { backdrop-filter: blur(5px); transition: all 0.3s ease; }
        main { flex: 1; }
    </style>
</head>
<body class="bg-gray-100">

    <header class="bg-white border-b p-4 flex justify-between items-center shadow-sm relative z-40">
        <div class="flex items-center space-x-3">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Government_Seal_of_Bangladesh.svg/1200px-Government_Seal_of_Bangladesh.svg.png" alt="BD Logo" class="w-10">
            <div>
                <h1 class="font-bold text-lg leading-tight">National ID Card Generator</h1>
                <p class="text-[10px] text-gray-500 uppercase tracking-tighter">Government of the People's Republic of Bangladesh</p>
            </div>
        </div>

        <div class="relative" id="userContainer">
            <div onclick="toggleDropdown()" class="flex items-center space-x-2 cursor-pointer group">
                <span id="navUserName" class="text-blue-600 font-medium group-hover:underline">এন্ড ইউজার</span>
                <div id="userAvatar" class="w-10 h-10 bg-blue-600 text-white rounded-full flex items-center justify-center border border-gray-300 font-bold uppercase">
                    ?
                </div>
            </div>
            
            <div id="userMenu" class="hidden absolute right-0 mt-2 w-48 bg-white border rounded shadow-xl py-2">
                <div id="loggedOutLinks">
                    <button onclick="openModal('loginModal')" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 border-b">লগইন করুন</button>
                    <button onclick="openModal('regModal')" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">রেজিস্ট্রেশন</button>
                </div>
                <div id="loggedInLinks" class="hidden">
                    <button onclick="showProfile()" class="w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 border-b">প্রোফাইল</button>
                    <button onclick="logout()" class="w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100">লগ আউট</button>
                </div>
            </div>
        </div>
    </header>

    <main id="mainContent" class="max-w-6xl mx-auto mt-8 p-4 grid grid-cols-1 md:grid-cols-2 gap-10">
        <div class="bg-white p-6 rounded-lg shadow-md border border-gray-200">
            <h2 class="text-xl font-bold mb-6 border-b pb-2 text-gray-700">Input Details</h2>
            <div class="space-y-4">
                <input type="text" id="inNameBn" oninput="validateBangla(this)" placeholder="নাম (বাংলায়)" class="w-full border p-2 rounded outline-none focus:ring-1 focus:ring-blue-500">
                <input type="text" id="inNameEn" placeholder="Name (English)" class="w-full border p-2 rounded outline-none focus:ring-1 focus:ring-blue-500">
                <input type="text" id="inFather" oninput="validateBangla(this)" placeholder="পিতার নাম (বাংলায়)" class="w-full border p-2 rounded outline-none focus:ring-1 focus:ring-blue-500">
                <input type="text" id="inMother" oninput="validateBangla(this)" placeholder="মাতার নাম (বাংলায়)" class="w-full border p-2 rounded outline-none focus:ring-1 focus:ring-blue-500">
                <input type="text" id="inNid" placeholder="ID NO (e.g. 9876543210)" class="w-full border p-2 rounded outline-none focus:ring-1 focus:ring-blue-500">
                
                <div class="flex items-center space-x-4">
                    <div class="w-1/2">
                        <label class="block text-xs font-bold mb-1">স্বাক্ষর (বাংলায়)</label>
                        <input type="text" id="inSign" oninput="validateBangla(this)" placeholder="স্বাক্ষর" class="w-full border p-2 rounded h-16 text-center italic text-xl">
                    </div>
                    <div class="w-1/2">
                        <label class="block text-xs font-bold mb-1">ছবি যুক্ত করুন</label>
                        <input type="file" id="imageInput" accept="image/*" class="text-xs w-full">
                    </div>
                </div>
                <button onclick="generateCard()" class="w-full bg-[#1a73e8] text-white font-bold py-3 rounded hover:bg-blue-700 shadow-md transition">জেনারেট করুন</button>
            </div>
        </div>

        <div class="flex flex-col items-center">
            <h2 class="text-xl font-bold mb-6 text-gray-700">Generated ID Card</h2>
            <div id="id-card-capture" class="w-[450px] h-[280px] bg-white border-2 border-gray-400 rounded-xl relative p-4 shadow-2xl overflow-hidden nid-card-font">
                <div class="absolute inset-0 opacity-10 flex items-center justify-center pointer-events-none">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Government_Seal_of_Bangladesh.svg/1200px-Government_Seal_of_Bangladesh.svg.png" class="w-40">
                </div>
                <div class="flex justify-between items-start border-b border-green-700 pb-1 mb-2">
                    <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Government_Seal_of_Bangladesh.svg/1200px-Government_Seal_of_Bangladesh.svg.png" class="w-8">
                    <div class="text-center flex-1">
                        <h3 class="text-green-800 font-bold text-[14px]">গণপ্রজাতন্ত্রী বাংলাদেশ সরকার</h3>
                        <p class="text-[9px] text-green-700 uppercase">Government of the People's Republic of Bangladesh</p>
                        <p class="text-[10px] text-red-600 font-bold mt-1">National ID Card / জাতীয় পরিচয়পত্র</p>
                    </div>
                </div>
                <div class="flex space-x-4 mt-2">
                    <div class="w-24 h-28 border border-gray-300 bg-gray-50 z-10 overflow-hidden">
                        <img id="cardPhoto" src="" class="hidden w-full h-full object-cover">
                    </div>
                    <div class="text-[12px] space-y-1 z-10 flex-1">
                        <p><strong>নাম:</strong> <span id="outNameBn"></span></p>
                        <p><strong>Name:</strong> <span id="outNameEn" class="uppercase"></span></p>
                        <p><strong>পিতা:</strong> <span id="outFather"></span></p>
                        <p><strong>মাতা:</strong> <span id="outMother"></span></p>
                        <p><strong>ID NO:</strong> <span id="outNid" class="text-red-600 font-bold"></span></p>
                    </div>
                </div>
                <div class="absolute bottom-4 right-6 text-center z-10">
                    <div id="outSign" class="text-lg italic border-b border-black px-4 h-6 flex items-end justify-center min-w-[80px]"></div>
                    <p class="text-[8px] mt-1">প্রদানকারীর স্বাক্ষর</p>
                </div>
            </div>
            <button id="dlBtn" onclick="downloadCard()" class="mt-6 bg-green-600 text-white px-8 py-2 rounded-lg font-bold hidden shadow-lg hover:bg-green-700 transition">ডাউনলোড করুন</button>
        </div>
    </main>

    <main id="profilePage" class="max-w-4xl mx-auto mt-8 p-4 hidden">
        <div class="bg-white p-8 rounded-2xl shadow-xl border border-gray-200">
            <div class="flex items-center space-x-6 border-b pb-6 mb-6">
                <div id="profileLargeAvatar" class="w-24 h-24 bg-blue-600 text-white rounded-full flex items-center justify-center text-4xl font-bold uppercase shadow-lg">?</div>
                <div>
                    <h2 id="profileDispName" class="text-2xl font-bold text-gray-800">ইউজার নাম</h2>
                    <p id="profileDispEmail" class="text-gray-500 italic">user@email.com</p>
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                <div class="space-y-4">
                    <h3 class="text-lg font-bold text-blue-600 border-b pb-2">সাধারণ তথ্য</h3>
                    <div>
                        <label class="block text-sm font-medium text-gray-600">ইউজারনেম</label>
                        <input type="text" id="editName" class="w-full border p-2 rounded mt-1 outline-none focus:ring-2 focus:ring-blue-400">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-600">ইমেইল</label>
                        <input type="email" id="editEmail" class="w-full border p-2 rounded mt-1 outline-none focus:ring-2 focus:ring-blue-400">
                    </div>
                </div>

                <div class="space-y-4">
                    <h3 class="text-lg font-bold text-red-600 border-b pb-2">পাসওয়ার্ড পরিবর্তন</h3>
                    <input type="password" id="oldPass" placeholder="বর্তমান পাসওয়ার্ড" class="w-full border p-2 rounded outline-none focus:ring-2 focus:ring-red-300">
                    <input type="password" id="newPass" placeholder="নতুন পাসওয়ার্ড" class="w-full border p-2 rounded outline-none focus:ring-2 focus:ring-red-300">
                    <input type="password" id="confirmPass" placeholder="কনফার্ম পাসওয়ার্ড" class="w-full border p-2 rounded outline-none focus:ring-2 focus:ring-red-300">
                </div>
            </div>

            <div class="mt-10 flex space-x-4">
                <button onclick="saveProfile()" class="bg-blue-600 text-white px-10 py-2 rounded-lg font-bold hover:bg-blue-700 transition shadow-md">সেভ করুন</button>
                <button onclick="goBackMain()" class="bg-gray-200 text-gray-700 px-10 py-2 rounded-lg font-bold hover:bg-gray-300">ফিরে যান</button>
            </div>
        </div>
    </main>

    <footer class="bg-white border-t p-6 mt-10 text-center text-gray-600 text-sm">
        <p>This site design and developed by 
            <a href="https://www.facebook.com/yourprofile" target="_blank" class="text-red-600 font-bold hover:underline">Kamrul</a>
        </p>
    </footer>

    <div id="loginModal" class="hidden fixed inset-0 bg-black/60 modal-bg flex items-center justify-center z-[100] p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative">
            <button onclick="closeModal('loginModal')" class="absolute top-4 right-4 text-gray-400 text-2xl">&times;</button>
            <h2 class="text-2xl font-bold mb-6 text-center italic text-blue-600 underline">লগইন</h2>
            <form class="space-y-4">
                <input type="email" id="loginEmail" placeholder="ইমেইল" class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-400">
                <input type="password" id="loginPass" placeholder="পাসওয়ার্ড" class="w-full border p-3 rounded-xl outline-none focus:ring-2 focus:ring-blue-400">
                <button type="button" onclick="fakeLogin('login')" class="w-full bg-blue-600 text-white font-bold py-3 rounded-xl shadow-lg">প্রবেশ করুন</button>
            </form>
            <div class="relative flex py-5 items-center"><div class="flex-grow border-t"></div><span class="mx-4 text-gray-400 text-sm">অথবা</span><div class="flex-grow border-t"></div></div>
            <button onclick="fakeLogin('google')" class="w-full flex items-center justify-center border p-2.5 rounded-xl hover:bg-gray-50 transition">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" class="w-5 h-5 mr-3"> Continue with Google
            </button>
        </div>
    </div>

    <div id="regModal" class="hidden fixed inset-0 bg-black/60 modal-bg flex items-center justify-center z-[100] p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-md p-8 relative">
            <button onclick="closeModal('regModal')" class="absolute top-4 right-4 text-gray-400 text-2xl">&times;</button>
            <h2 class="text-2xl font-bold mb-6 text-center text-green-700 italic underline">রেজিস্ট্রেশন</h2>
            <form class="space-y-4">
                <input type="text" id="regName" placeholder="আপনার নাম" class="w-full border p-3 rounded-xl outline-none">
                <input type="email" id="regEmail" placeholder="ইমেইল এড্রেস" class="w-full border p-3 rounded-xl outline-none">
                <input type="password" id="regPass" placeholder="পাসওয়ার্ড সেট করুন" class="w-full border p-3 rounded-xl outline-none">
                <button type="button" onclick="fakeLogin('reg')" class="w-full bg-green-600 text-white font-bold py-3 rounded-xl shadow-lg">একাউন্ট তৈরি করুন</button>
            </form>
        </div>
    </div>

    <script>
        let isUserLoggedIn = false;
        let currentUser = { name: "Guest User", email: "guest@example.com", pass: "123456" };

        function toggleDropdown() { document.getElementById('userMenu').classList.toggle('hidden'); }
        function openModal(id) { document.getElementById(id).classList.remove('hidden'); document.getElementById('userMenu').classList.add('hidden'); }
        function closeModal(id) { document.getElementById(id).classList.add('hidden'); }
        function validateBangla(input) { input.value = input.value.replace(/[a-zA-Z0-9]/g, ''); }

        function generateCard() {
            const inputs = ['inNameBn', 'inNameEn', 'inFather', 'inMother', 'inNid', 'inSign'];
            let allFilled = true;
            inputs.forEach(id => { if (!document.getElementById(id).value.trim()) allFilled = false; });
            const photoSrc = document.getElementById('cardPhoto').src;
            
            if (!allFilled || !photoSrc || photoSrc === window.location.href) { 
                alert("দুঃখিত! সব তথ্য এবং ছবি খালী রাখা যাবে না।"); 
                return; 
            }

            document.getElementById('outNameBn').innerText = document.getElementById('inNameBn').value;
            document.getElementById('outNameEn').innerText = document.getElementById('inNameEn').value;
            document.getElementById('outFather').innerText = document.getElementById('inFather').value;
            document.getElementById('outMother').innerText = document.getElementById('inMother').value;
            document.getElementById('outNid').innerText = document.getElementById('inNid').value;
            document.getElementById('outSign').innerText = document.getElementById('inSign').value;
            document.getElementById('dlBtn').classList.remove('hidden');
        }

        async function downloadCard() {
            const card = document.getElementById('id-card-capture');
            const btn = document.getElementById('dlBtn');
            btn.innerText = "ডাউনলোড হচ্ছে...";
            
            html2canvas(card, { scale: 3, useCORS: true, allowTaint: true }).then(canvas => {
                const link = document.createElement('a');
                link.download = 'fakenidgenaretor.png';
                link.href = canvas.toDataURL("image/png");
                link.click();
                btn.innerText = "ডাউনলোড করুন";
            });
        }

        function fakeLogin(type) {
            isUserLoggedIn = true;
            if(type === 'reg') {
                currentUser.name = document.getElementById('regName').value || "Kamrul";
                currentUser.email = document.getElementById('regEmail').value || "kamrul@gmail.com";
                currentUser.pass = document.getElementById('regPass').value || "123456";
            }
            updateUserUI();
            closeModal('loginModal');
            closeModal('regModal');
        }

        function updateUserUI() {
            if (isUserLoggedIn) {
                document.getElementById('navUserName').innerText = currentUser.name;
                const firstLetter = currentUser.name.charAt(0);
                document.getElementById('userAvatar').innerText = firstLetter;
                document.getElementById('profileLargeAvatar').innerText = firstLetter;
                document.getElementById('loggedOutLinks').classList.add('hidden');
                document.getElementById('loggedInLinks').classList.remove('hidden');
            } else {
                document.getElementById('navUserName').innerText = "এন্ড ইউজার";
                document.getElementById('userAvatar').innerText = "?";
                document.getElementById('loggedOutLinks').classList.remove('hidden');
                document.getElementById('loggedInLinks').classList.add('hidden');
            }
        }

        function showProfile() {
            document.getElementById('mainContent').classList.add('hidden');
            document.getElementById('profilePage').classList.remove('hidden');
            document.getElementById('profileDispName').innerText = currentUser.name;
            document.getElementById('profileDispEmail').innerText = currentUser.email;
            document.getElementById('editName').value = currentUser.name;
            document.getElementById('editEmail').value = currentUser.email;
            toggleDropdown();
        }

        function saveProfile() {
            const oldP = document.getElementById('oldPass').value;
            const newP = document.getElementById('newPass').value;
            const confP = document.getElementById('confirmPass').value;

            // Password Change Logic
            if(oldP || newP || confP) {
                if(oldP !== currentUser.pass) { alert("বর্তমান পাসওয়ার্ড সঠিক নয়!"); return; }
                if(newP !== confP) { alert("নতুন পাসওয়ার্ড কনফার্ম হয়নি!"); return; }
                if(newP.length < 6) { alert("নতুন পাসওয়ার্ড অন্তত ৬ অক্ষরের হতে হবে!"); return; }
                currentUser.pass = newP;
                alert("পাসওয়ার্ড সফলভাবে পরিবর্তন হয়েছে!");
            }

            currentUser.name = document.getElementById('editName').value;
            currentUser.email = document.getElementById('editEmail').value;
            
            // Reset Fields
            document.getElementById('oldPass').value = "";
            document.getElementById('newPass').value = "";
            document.getElementById('confirmPass').value = "";
            
            updateUserUI();
            alert("প্রোফাইল তথ্য আপডেট করা হয়েছে!");
            goBackMain();
        }

        function goBackMain() {
            document.getElementById('profilePage').classList.add('hidden');
            document.getElementById('mainContent').classList.remove('hidden');
        }

        function logout() {
            isUserLoggedIn = false;
            updateUserUI();
            goBackMain();
            toggleDropdown();
        }

        document.getElementById('imageInput').onchange = function(evt) {
            var fr = new FileReader();
            fr.onload = function() { 
                document.getElementById('cardPhoto').src = fr.result; 
                document.getElementById('cardPhoto').classList.remove('hidden'); 
            }
            fr.readAsDataURL(evt.target.files[0]);
        }

        window.onclick = function(e) {
            if (!e.target.closest('#userContainer')) document.getElementById('userMenu').classList.add('hidden');
            if (e.target.classList.contains('modal-bg')) { closeModal('loginModal'); closeModal('regModal'); }
        }
    </script>
</body>
</html>